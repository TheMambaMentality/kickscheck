<h2><%= @post.title %></h2>
<p><%= @post.content %></p>

<% if @post.images.attached? %>
  <div class="d-flex flex-wrap mb-3">
    <% @post.images.each do |image| %>
      <%= image_tag image.variant(resize_to_limit: [600, 600]).processed, class: "img-fluid mb-3 mr-2", style: "max-height: 300px;" %>
    <% end %>
  </div>
<% end %>

<% if @post.user == current_user %>
  <%= link_to "ç·¨é›†", edit_post_path(@post) %> |
  <%= link_to "å‰Šé™¤", post_path(@post), method: :delete, data: { confirm: "æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ" } %> |
<% end %>

<%= link_to "ä¸€è¦§ã¸æˆ»ã‚‹", posts_path %>

<hr>

<!-- ðŸ”¸ ã‚³ãƒ¡ãƒ³ãƒˆã‚¨ãƒªã‚¢ -->
<h3>ã‚³ãƒ¡ãƒ³ãƒˆ</h3>

<% if flash[:alert] %>
  <div class="alert alert-danger"><%= flash[:alert] %></div>
<% end %>

<% if flash[:notice] %>
  <div class="alert alert-success"><%= flash[:notice] %></div>
<% end %>

<%= form_with(model: [@post, Comment.new], local: true) do |f| %>
  <div class="form-group">
    <%= f.label :content, "ã‚³ãƒ¡ãƒ³ãƒˆå†…å®¹" %>
    <%= f.text_area :content, rows: 3, class: "form-control", placeholder: "ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›" %>
  </div>
  <%= f.submit "ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹", class: "btn btn-primary mt-2" %>
<% end %>

<!-- ðŸ”¸ ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§ -->
<% @post.comments.order(created_at: :desc).each do |comment| %>
  <div class="card mt-3">
    <div class="card-body">
      <p><strong><%= comment.user.name %>ï¼š</strong> <%= comment.content %></p>
      <p class="text-muted"><%= comment.created_at.strftime("%Y-%m-%d %H:%M") %></p>

      <% if comment.user == current_user %>
        <%= link_to "å‰Šé™¤", post_comment_path(@post, comment), method: :delete, data: { confirm: "å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ" }, class: "btn btn-sm btn-danger" %>

      <% elsif admin_signed_in? %>
        <%= link_to "ã€ç®¡ç†è€…ã€‘å‰Šé™¤", admin_comment_path(comment), method: :delete, data: { confirm: "ç®¡ç†è€…ã¨ã—ã¦å‰Šé™¤ã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ" }, class: "btn btn-sm btn-warning" %>
      <% end %>
    </div>
  </div>
<% end %>